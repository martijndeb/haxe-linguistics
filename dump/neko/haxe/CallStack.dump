class haxe.CallStack{
	static public exceptionStack(method) : Void -> Array<haxe.StackItem>

	 = function() = {
		return haxe.CallStack.makeStack(__dollar__excstack());
	};

	static public toString(method) : stack : Array<haxe.StackItem> -> String

	 = function(stack:Array<haxe.StackItem>) = {
		var b = new StringBuf();
		{
			var _g = 0;
			while ((_g < stack.length)) {
				var s = stack[_g];
				++ _g;
				StringBuf.__add(b.b,"\nCalled from ");
				haxe.CallStack.itemToString(b,s);
			};
		};
		return new String(StringBuf.__to_string(b.b));
	};

	static itemToString(method) : b : StringBuf -> s : haxe.StackItem -> Void

	 = function(b:StringBuf,s:haxe.StackItem) = {
		@:ast('???') switch ((@:exhaustive s.index)) {
			case 0: StringBuf.__add(b.b,"a C function")
,			case 1: {
				var m = s[0];
				{
					StringBuf.__add(b.b,"module ");
					StringBuf.__add(b.b,m);
				};
			}
,			case 2: {
				var line = s[2];
				var file = s[1];
				var s1 = s[0];
				{
					if ((s1 != null)){
						haxe.CallStack.itemToString(b,s1);
						StringBuf.__add(b.b," (");
					});
					StringBuf.__add(b.b,file);
					StringBuf.__add(b.b," line ");
					StringBuf.__add(b.b,line);
					if ((s1 != null))StringBuf.__add(b.b,")"));
				};
			}
,			case 3: {
				var meth = s[1];
				var cname = s[0];
				{
					StringBuf.__add(b.b,cname);
					StringBuf.__add(b.b,".");
					StringBuf.__add(b.b,meth);
				};
			}
,			case 4: {
				var n = s[0];
				{
					StringBuf.__add(b.b,"local function #");
					StringBuf.__add(b.b,n);
				};
			}
		};
	};

	static makeStack(method) : s : Array<String> -> Array<haxe.StackItem>

	 = function(s:Array<String>) = {
		var a = new Array();
		var l = __dollar__asize(s);
		var i = 0;
		while ((i < l)) {
			var x = s[i ++];
			if ((x == null))a.unshift(haxe.StackItem.CFunction) else if ((__dollar__typeof(x) == __dollar__tstring))a.unshift(haxe.StackItem.Module(new String(x))) else a.unshift(haxe.StackItem.FilePos(null,new String(x[0]),x[1]))));
		};
		return a;
	};

}